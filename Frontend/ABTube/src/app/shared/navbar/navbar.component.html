<nav class="navbar">
    <div class="nav-left">
        <button class="icon-btn menu-btn" (click)="sidebarService.toggle()">â˜°</button>
        <a routerLink="/" class="logo">
            <img src="logo.png" alt="ABTube" class="logo-img"> AB-Tube
        </a>
    </div>

    <div class="nav-center">
        <div class="search-box">
            <input type="text" placeholder="Search" [ngModel]="videoService.searchQuery()"
                (input)="updateSearch($event)" (keyup.enter)="onSearch()">
            <button class="search-btn" (click)="onSearch()">ğŸ”</button>
        </div>
    </div>

    <div class="nav-right">
        <button class="icon-btn theme-btn" (click)="toggleTheme()" title="Toggle Theme">
            {{ themeService.isDark() ? 'ğŸŒ™' : 'â˜€ï¸' }}
        </button>

        @if (auth.currentUser()) {
        <a routerLink="/upload" class="icon-btn" title="Upload">+</a>
        }

        <div class="profile-dropdown-container">
            <button class="avatar-btn" (click)="toggleDropdown()">
                @if (auth.currentUser()) {
                <div class="avatar-img">{{ auth.currentUser()?.charAt(0) | uppercase }}</div>
                } @else {
                <div class="avatar-icon">ğŸ‘¤</div>
                }
            </button>

            @if (isDropdownOpen) {
            <div class="dropdown-menu">
                @if (auth.currentUser()) {
                <div class="dropdown-header">
                    <span class="header-icon">ğŸ‘¤</span>
                    <span class="user-name">{{ auth.currentUser() }}</span>
                </div>
                <div class="divider"></div>
                <a routerLink="/profile" class="dropdown-item" (click)="closeDropdown()">
                    <span class="icon">ğŸ‘¤</span> Profile
                </a>
                <button class="dropdown-item" (click)="logout()">
                    <span class="icon">ğŸšª</span> Logout
                </button>
                } @else {
                <a routerLink="/login" class="dropdown-item" (click)="closeDropdown()">
                    <span class="icon">ğŸ”‘</span> Login
                </a>
                <a routerLink="/register" class="dropdown-item" (click)="closeDropdown()">
                    <span class="icon">ğŸ“</span> Registration
                </a>
                }
            </div>
            }
        </div>
    </div>
</nav>